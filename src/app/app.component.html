<div class="container-fluid">
  <div *ngIf="percentComplete < 100" class="loader-container">
    Loading object
    <div
      class="loading-bar"
      [style.width.%]="percentComplete"
      style="background-color: #2ecc71"
    >
      {{ percentComplete }}%
    </div>
  </div>
  <!-- Begin Header -->
  <div class="row top-section">
    <div class="col-3 col-md-2">
      <img
        alt="Custom Design Center"
        src="https://placeholder.com/wp-content/uploads/2018/10/placeholder.com-logo1.jpg"
        class="logo"
      />
    </div>
    <div class="col-9 col-md-7 product-details">
      <h2 class="style-title">{{ selectedConfiguration.style.styleName }}</h2>
      <p class="style-description">{{ selectedStyle.description }}</p>
    </div>
    <div class="col-2 col-md-2">Intersect: {{ tmp }}</div>
  </div>
  <!-- End of Header -->

  <!-- Begin main content -->
  <div class="row">
    <div class="col-12 col-md-2 ">
      <div class="col-6 col-md-12 toolbox-group">
        <h5>Building options</h5>
        <label>Size (Depth x Width)</label>
        <select
          [(ngModel)]="selectedConfiguration.style.styleDW"
          (ngModelChange)="onProductSizeChanged()"
          name="Select size"
          class="ui fluid search selection dropdown"
        >
          <option
            *ngFor="let size of selectedStyle.depthwidth"
            [attr.value]="size.$.value"
            >{{ size.$.name }}</option
          >
        </select>
        <label>Wall height</label>
        <select
          [(ngModel)]="selectedConfiguration.style.styleHeight"
          (ngModelChange)="onProductSizeChanged()"
          name="Select"
          class="ui fluid search selection dropdown"
        >
          <option
            *ngFor="let height of selectedStyle.wallheight"
            [attr.value]="height.$.value"
            >{{ height.$.name }}</option
          >
        </select>
        <label>Overhang</label>
        <select
          [(ngModel)]="selectedOverhang"
          (ngModelChange)="onOverhangChanged()"
          name="Select"
          class="ui fluid search selection dropdown"
        >
          <option
            *ngFor="let overhang of selectedStyle.overhang"
            [attr.value]="overhang.$.value"
            >{{ overhang.$.name }}</option
          >
        </select>
        <br />
        <button class="options-button" (click)="showSidings()">
          Change siding
        </button>
        <br />
        <button class="options-button" (click)="showTrim()">Change trim</button>
      </div>
      <div class="col-6 col-md-12 toolbox-group">
        <h5>Add options</h5>
        <div class="options-categories-list">
          <button
            *ngFor="let category of optionsCategories"
            (click)="showOptions(category)"
            class="options-button"
          >
            {{ category.name }}
          </button>
        </div>
      </div>
    </div>
    <div
      #container
      class="col-12 col-md-10"
      id="renderer_container"
      canvasinteraction
      (onMouseDown)="onCanvasClickDown($event)"
      (onMouseUp)="onCanvasClickUp($event)"
      (onMouseMove)="onCanvasMouseMove($event)"
      (drop)="droppedOption($event, dropData)"
      (dragover)="allowDrop($event)"
    ></div>
  </div>
  <div class="row">
    <div class="col-12 col-md-12 col-xs-12 category-buttons">
      <button
        class="category-button"
        *ngFor="let category of productCategories"
        (click)="changeCategory(category.id)"
        [ngClass]="category.id === selectedCategory ? 'selected' : ''"
      >
        {{ category.name }}
      </button>
    </div>
    <div class="col-12 col-md-12" col-xs-12>
      <product-styles-slider
        [currentSelectedProduct]="this.selectedConfiguration"
        [(category)]="selectedCategory"
        (productStyleClicked)="onProductStyleClicked($event)"
      >
      </product-styles-slider>
    </div>
  </div>
  <div class="toolbox-group floating-right-center">
    <h5>Toolbox</h5>
    <br />
    <button
      mat-raised-button
      class="tool-btn"
      (click)="alignEvenly(currentWall)"
    >
      Align evenly
    </button>
    <br />
    <br />
    <h5>Change Background</h5>
    <select [(ngModel)]="currentBackground" (change)="changeBackground($event)">
      <option value="pool">Pool</option>
      <option value="Park2">Park2</option>
      <option value="Sorsele">Sorsele</option>
    </select>
    <br />
    <br />
    <h5>Use your own background</h5>
    <image-upload
      [max]="2"
      [extensions]="['jpeg', 'png']"
      class="image-upload"
      (removed)="onBackgroundRemoved($event)"
      (uploadFinished)="onBackgroundUploadFinished($event)"
      (uploadStateChanged)="onBackgroundUploadStateChanged($event)"
    >
    </image-upload>
  </div>
  <div class="toolbox-group floating-right-bottom">
    <h5>Sharing</h5>
    <button class="share-btn" color="primary" (click)="shareOnFacebook()">
      Share on Facebook
    </button>
    <br />
    <button class="share-btn" (click)="shareOnTwitter()">
      Share on Twitter
    </button>
    <br />
    <button class="share-btn" (click)="takeScreenshot()">
      Save screenshot
    </button>
    <br />
  </div>
  <div
    id="context-menu"
    [ngClass]="selectedElement != null ? 'visible' : 'hidden'"
    [style.left.px]="mouse.clientX + 20"
    [style.top.px]="mouse.clientY"
  >
    <button
      [ngClass]="draggingStartedAt != null ? 'dragging' : 'inactive'"
      draggable="true"
      (drag)="dragObject($event)"
    >
      <i class="material-icons">open_with</i>
    </button>
    <br />
    <br />
    <button (click)="removeSelectedElement()">
      <i class="material-icons">delete</i>
    </button>
  </div>
  <!-- Begin drawer for sidings -->
  <mat-card class="sidings-drawer" [@sidingsDrawertrigger]="sidingsDrawerState">
    <mat-card-header>
      <div class="col-md-9 drawer-title">Change Siding</div>
      <div class="col-md-3">
        <button mat-mini-fab color="accent" (click)="closeSidingsDrawer()">
          <mat-icon aria-label="Close">close</mat-icon>
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <button
        class="siding-option"
        *ngFor="let siding of sidingOptions"
        (click)="changeSidingsTexture('wall-1', siding)"
      >
        <img src="{{ siding.thumbnail }}" />
        <h6>{{ siding.name }}</h6>
      </button>
    </mat-card-content>
  </mat-card>
  <!-- End drawer for sidings -->
  <!-- Brgin drawer for trip -->
  <mat-card class="sidings-drawer" [@trimDrawertrigger]="trimDrawerState">
    <mat-card-header>
      <div class="col-md-9 drawer-title">Change Trim</div>
      <div class="col-md-3">
        <button mat-mini-fab color="accent" (click)="closeTrimDrawer()">
          <mat-icon aria-label="Close">close</mat-icon>
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <button
        class="siding-option"
        *ngFor="let trim of trimOptions"
        (click)="changeTrimTexture(trim)"
      >
        <img src="{{ trim.thumbnail }}" />
        <h6>{{ trim.name }}</h6>
      </button>
    </mat-card-content>
  </mat-card>
  <!-- End drawer for trip -->
  <!-- Begin drawer for options -->
  <mat-card class="options-drawer" [@optionsDrawertrigger]="optionsDrawerState">
    <mat-card-header>
      <div class="col-md-8 drawer-title">
        {{ selectedOptionsCategory.name }}
      </div>
      <div class="col-md-3">
        <button mat-mini-fab color="accent" (click)="closeOptions()">
          <mat-icon aria-label="Close">close</mat-icon>
        </button>
      </div>
    </mat-card-header>
    <mat-card-content>
      <div
        *ngFor="let option of availableOptions"
        class="option-details"
        draggable="true"
        (drag)="startDraggingOption($event, option)"
        (dragend)="removeHighlights()"
        (dragstart)="highlightTargets(option)"
      >
        <img src="{{ option.image }}" />
        <h6>{{ option.name }}</h6>
      </div>
    </mat-card-content>
  </mat-card>
  <!-- Begin drawer for options -->
</div>
